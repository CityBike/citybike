<!DOCTYPE html>

<head>
  <script src="//cdn.jsdelivr.net/npm/phaser@3.1.1/dist/phaser.js"></script>

  <meta charset="UTF-8">
  <title></title>
</head>

<body>
  <script type="text/javascript">

    var config = {
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      physics: {
        default: 'arcade',
        arcade: {
          gravity: { y: 0 }
          // debug: false
        }
      },
      scene: {
        preload: preload,
        create: create,
        update: update
      }
    };

    var papergirl;
    var bluecar;
    var game = new Phaser.Game(config);
    var cursors;
    var frameNames;

    function preload() {
      this.load.image('roadmap', '../assets/TestRoadMapv1.png');
      this.load.atlas('papergirl', '../assets/papergirl.png', '../assets/papergirl.json')
      this.load.image('bluecar', '../assets/vehicles/carBlue2_006.png');
    }

    function create() {
      this.add.image(700, 250, 'roadmap');
      // this.cameras.add(90000, 12200, 600, 800, true, 'moving');
      // this.cameras.main.x = -100;
      // this.cameras.main.y = 100;
      // var roadmap = this.add.displayList.list[0]

      papergirl = this.add.sprite(150, 500, 'papergirl', 'fdddd_07.gif')
      bluecar = this.physics.add.sprite(150, 500, 'bluecar');
      // bluecar.disableBody(true,true);
      console.log(this.add);

      console.log('bluecar', bluecar);
      frameNames = this.anims.generateFrameNames('papergirl', {
        start: 3, end: 59, zeroPad: 2, prefix: 'fdddd_', suffix: '.gif'
      })

      leftFrames = this.anims.generateFrameNames('papergirl', {
        start: 3, end: 59, zeroPad: 2, prefix: 'fdddd_', suffix: '.gif'
      })

      // papergirl = this.physics.add.sprite(150, 200, 'papergirl')
      // papergirl.setBounce(0.2);
      // papergirl.setCollideWorldBounds(true);

      cursors = this.input.keyboard.createCursorKeys();

       this.anims.create({
        key: 'left',
        frames: frameNames,
        frameRate: 10,
        repeat: -1
      })

      papergirl.anims.play('left')

      // console.log(this.time.now);

      // this.anims.create({
      //   key: 'left',
      //   frames: this.anims.generateFrameNumbers('papergirl', { start: 0, end: 3 }),
      //   frameRate: 10,
      //   repeat: -1
      // })

      // this.anims.create({
      //   key: 'turn',
      //   frames: [{ key: 'papergirl', frame: 4 }],
      //   frameRate: 20
      // })

      // this.anims.create({
      //   key: 'right',
      //   frames: this.anims.generateFrameNumbers('papergirl', { start: 5, end: 8 }),
      //   frameRate: 10,
      //   repeat: -1
      // })

      // console.log(this.time);
      // console.log('sprite', bluecar._events);
      // console.log(this.time.addEvent);
    }

    function update() {
      bluecar.setVelocityX(80);
      bluecar.setVelocityY(-40);
      // this.cameras.main.x = this.cameras.main.x - 1;
      // this.cameras.main.y = this.cameras.main.y + 1;
      var roadmap = this.add.displayList.list[0];
      roadmap.y = roadmap.y + .2;
      roadmap.x = roadmap.x - .5;
      // console.log(this.time.now);

      // console.log(this.time.now)
      // console.log(this.time);

      if (this.time.now == 1000) {
        // bluecar = this.physics.add.sprite(150, 500, 'bluecar');
        // bluecar.enableBody(true, true);
        console.log('hi');
      }

      // if (cursors.left.isDown) {
      //   papergirl.setVelocityX(-160);

      //   papergirl.anims.play('left', true);
      // }


      // else if (cursors.right.isDown) {
      //   papergirl.setVelocityX(160);


      //   papergirl.anims.play('right', true);
      // }
      // else {
      //   papergirl.setVelocityX(0);

      //   papergirl.anims.play('turn');
      // }
      // if (cursors.up.isDown && papergirl.body.touching.down) {
      //   papergirl.setVelocityY(-330);
      // }
    }


  </script>
</body>

</html>
